{{extend 'layout.html'}}

<h1>{{=issue.title}}</h1>
<i>{{=T("Created by: %s %s on %s", (issue.created_by_user.first_name, issue.created_by_user.last_name, str(issue.created_on)))}}</i><br>
{{if (issue.created_by, issue.created_on) != (issue.modified_by, issue.modified_on):}}
    <i>{{=T("Last modified by: %s %s on %s" , (issue.modified_by_user.first_name, issue.modified_by_user.last_name, str(issue.modified_on)))}}</i>
    {{pass}}
{{=MARKMIN(issue.body)}}
[ {{=A('edit', _href=URL('edit', args=request.args))}}
| {{=A('attachments', _href=URL('attachments', args=request.args))}}]<br />

{{if attachments:}}
    <h3>Attachments:</h3>
    <ul>
    {{for att in attachments:}}
        {{=LI(A(att.name, _href=URL('download', args=att.doc)))}}
        {{pass}}
    </ul>
    {{pass}}


{{def build_comment_view(comment):}}
{{if comment['body']:}}
    {{=LI(str(comment['created_by'])+' on '+str(comment['created_on'])+': '+str(comment['body']))}}
    {{pass}}
{{=comment['new_comment_form']}}
<ul>
    {{for child in comment['children']:}}
        {{build_comment_view(child)}}
        {{pass}}
</ul>
{{return}}


<ul>
    <h3>Comments:</h3>
    {{build_comment_view(comment_tree)}}
</ul>

    
    
    